<!-- Settings Panel -->
<div class="settings-overlay" id="settingsOverlay"></div>
<div class="settings-panel" id="settingsPanel">
  <div class="settings-header">
    <h3 class="settings-title">Settings</h3>
    <button class="settings-close" id="settingsClose">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
  </div>
  
  <div class="settings-content">
    <!-- Theme Setting -->
    <div class="setting-group">
      <label class="setting-label">Appearance</label>
      <p class="setting-description">Choose between light and dark theme</p>
      <div class="theme-toggle" id="themeToggle">
        <svg class="theme-toggle-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="theme-toggle-text" id="themeToggleText">Dark Mode</span>
        <div class="theme-toggle-indicator" id="themeIndicator"></div>
      </div>
    </div>

    <!-- Color Palette Setting -->
    <div class="setting-group">
      <label class="setting-label">Color Palette</label>
      <p class="setting-description">Choose your preferred color scheme</p>
      <div class="color-palette-options">
        <div class="color-palette-grid">
          <div class="color-palette-item" data-palette="default">
            <div class="color-preview">
              <div class="color-dot" style="background: #2563eb;"></div>
              <div class="color-dot" style="background: #3b82f6;"></div>
              <div class="color-dot" style="background: #60a5fa;"></div>
            </div>
            <span class="color-palette-name">Default Blue</span>
          </div>
          <div class="color-palette-item" data-palette="green">
            <div class="color-preview">
              <div class="color-dot" style="background: #059669;"></div>
              <div class="color-dot" style="background: #10b981;"></div>
              <div class="color-dot" style="background: #34d399;"></div>
            </div>
            <span class="color-palette-name">Nature Green</span>
          </div>
          <div class="color-palette-item" data-palette="purple">
            <div class="color-preview">
              <div class="color-dot" style="background: #7c3aed;"></div>
              <div class="color-dot" style="background: #8b5cf6;"></div>
              <div class="color-dot" style="background: #a78bfa;"></div>
            </div>
            <span class="color-palette-name">Royal Purple</span>
          </div>
          <div class="color-palette-item" data-palette="orange">
            <div class="color-preview">
              <div class="color-dot" style="background: #ea580c;"></div>
              <div class="color-dot" style="background: #f97316;"></div>
              <div class="color-dot" style="background: #fb923c;"></div>
            </div>
            <span class="color-palette-name">Warm Orange</span>
          </div>
          <div class="color-palette-item" data-palette="pink">
            <div class="color-preview">
              <div class="color-dot" style="background: #db2777;"></div>
              <div class="color-dot" style="background: #ec4899;"></div>
              <div class="color-dot" style="background: #f472b6;"></div>
            </div>
            <span class="color-palette-name">Vibrant Pink</span>
          </div>
          <div class="color-palette-item" data-palette="teal">
            <div class="color-preview">
              <div class="color-dot" style="background: #0d9488;"></div>
              <div class="color-dot" style="background: #14b8a6;"></div>
              <div class="color-dot" style="background: #5eead4;"></div>
            </div>
            <span class="color-palette-name">Ocean Teal</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Font Size Setting -->
    <div class="setting-group">
      <label class="setting-label">Font Size</label>
      <p class="setting-description">Adjust text size for better readability</p>
      <div class="font-size-options">
        <button class="font-size-btn" data-font-size="small" id="fontSmall">Small</button>
        <button class="font-size-btn active" data-font-size="medium" id="fontMedium">Medium</button>
        <button class="font-size-btn" data-font-size="large" id="fontLarge">Large</button>
      </div>
    </div>

    <!-- Language Setting -->
    <div class="setting-group">
      <label class="setting-label">Language</label>
      <p class="setting-description">Select your preferred language</p>
      <select class="form-select" id="languageSelect">
        <option value="en">English</option>
        <option value="fil">Filipino</option>
      </select>
    </div>

    <!-- Database Settings -->
    <div class="setting-group" id="databaseSettingsGroup">
      <label class="setting-label">Database Configuration</label>
      <p class="setting-description">Configure your database connection and storage options</p>

      <div class="database-mode-selection">
        <div class="radio-group">
          <label class="radio-option">
            <input type="radio" name="dbMode" value="sqlite" id="dbModeSQLite" checked>
            <span class="radio-indicator"></span>
            <div class="radio-content">
              <strong>SQLite Local (Primary)</strong>
              <small>Local database with auto-sync to MongoDB backup</small>
            </div>
          </label>

          <label class="radio-option">
            <input type="radio" name="dbMode" value="mongodb" id="dbModeMongoDB">
            <span class="radio-indicator"></span>
            <div class="radio-content">
              <strong>MongoDB Atlas (Backup)</strong>
              <small>Cloud backup database, synced from SQLite</small>
            </div>
          </label>
        </div>
      </div>

      <div class="database-config" id="mongodbConfig" style="display: none;">
        <div class="form-field" style="margin-top: 16px;">
          <label class="form-field-label">MongoDB Connection String</label>
          <input type="text" class="form-input" id="mongoConnectionString"
                 placeholder="mongodb+srv://username:password@cluster.mongodb.net/">
        </div>
        <div class="form-field">
          <label class="form-field-label">Database Name</label>
          <input type="text" class="form-input" id="mongoDatabaseName"
                 placeholder="inkandarch" value="inkandarch">
        </div>
      </div>

      <div class="database-actions" style="margin-top: 16px;">
        <button class="btn btn-primary" id="testConnectionBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          </svg>
          Test Connection
        </button>
        <button class="btn btn-secondary" id="saveDbConfigBtn">Save Configuration</button>
      </div>

      <div class="database-status" id="databaseStatus" style="margin-top: 12px;">
        <div class="status-indicator">
          <span class="status-dot" id="dbStatusDot"></span>
          <span class="status-text" id="dbStatusText">Using Mock Database</span>
        </div>
      </div>
    </div>

    <!-- Data Sync Setting -->
    <div class="setting-group">
      <label class="setting-label">Data Synchronization</label>
      <p class="setting-description">Manage data sync with cloud storage</p>
      <div class="sync-controls">
        <div class="sync-status-display" id="syncStatusDisplay">
          <div class="sync-info">
            <span class="sync-status-text" id="syncStatusText">Checking...</span>
            <span class="sync-last-time" id="syncLastTime">Last sync: Never</span>
          </div>
          <div class="sync-indicator" id="syncIndicator"></div>
        </div>
        <button class="btn btn-primary" id="manualSyncBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M23 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Sync Now
        </button>
      </div>
    </div>

    <!-- Reset Settings -->
    <div class="setting-group">
      <label class="setting-label">Reset</label>
      <p class="setting-description">Reset all settings to default values</p>
      <button class="btn btn-secondary" id="resetSettingsBtn">Reset to Defaults</button>
    </div>

    <!-- Clear Cache -->
    <div class="setting-group">
      <label class="setting-label">Clear Cache</label>
      <p class="setting-description">Clear all browser cache, cookies, and local storage</p>
      <button class="btn btn-danger" id="clearCacheBtn">Clear Browser Cache</button>
    </div>

    <!-- Database Backup & Recovery -->
    <div class="setting-group" id="databaseBackupGroup">
      <label class="setting-label">Database Backup & Recovery</label>
      <p class="setting-description">Create backups and restore from saved restore points</p>

      <div class="backup-controls" style="margin-bottom: 16px;">
        <button class="btn btn-primary" id="createBackupBtnSettings">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 13v6a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="12,3 12,13 9,10 15,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Create Backup Now
        </button>
      </div>

      <div class="restore-points-section">
        <div class="restore-points-header">
          <h5 style="margin: 0 0 12px 0; font-size: 14px; color: var(--gray-700);">Saved Restore Points</h5>
          <p style="margin: 0; font-size: 12px; color: var(--gray-500);">Last 7 days</p>
        </div>
        <div id="restorePointsListSettings" class="restore-points-list-settings">
          <p style="padding: 12px; text-align: center; color: var(--gray-500); font-size: 13px;">Loading restore points...</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Settings Trigger Button -->
<button class="settings-trigger" id="settingsTrigger">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>
